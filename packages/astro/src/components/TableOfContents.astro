---
// https://github.com/withastro/starlight/blob/main/packages/starlight/components/TableOfContents.astro
import { cn } from "@website/shared/utils";
import TableOfContentsList from "./TableOfContentsList.astro";
import type { HTMLAttributes } from "astro/types";
import type { TOC } from "@/utils/toc";
import CircleArrowRightSVG from "@website/shared/svg/circle-arrow-right.svg";

type Props = HTMLAttributes<"nav"> & {
  toc: TOC;
};

const { toc, class: className, ...props } = Astro.props;
---

<starlight-toc
  class="block text-sm"
  data-min-h={toc.options.minHeadingLevel}
  data-max-h={toc.options.maxHeadingLevel}
>
  <nav class={cn("space-y-4", className)} {...props}>
    <h2 class="font-medium">On this page</h2>
    <div class="ml-2">
      <TableOfContentsList toc={toc.items} />
    </div>
    <div>
      <a class="flex items-center space-x-1.5" href="/experience">
        <span class="text-gray-600">Back to list</span>
        <CircleArrowRightSVG class="size-4 text-gray-400" />
      </a>
    </div>
  </nav>
</starlight-toc>

<script src="./starlight-toc"></script>
