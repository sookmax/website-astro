---
import ExperienceList from "@/components/ExperienceList.astro";
import { getCollection } from "astro:content";
import ExperienceTypeList from "@/components/ExperienceTypeList.astro";
import ExperienceListLayout from "@/layouts/ExperienceListLayout.astro";
import {
  getExperienceTypeCounts,
  sortExperiencesByDate,
} from "@/utils/experience";

const experiences = sortExperiencesByDate(await getCollection("experience"));
const typeCounts = getExperienceTypeCounts(experiences);
---

<ExperienceListLayout
  title="Experience"
  description="List of my experiences in data analysis and web development."
>
  <ExperienceTypeList slot="experience-type-list" typeCounts={typeCounts} />
  <ExperienceList slot="experience-list" items={experiences} />
</ExperienceListLayout>
